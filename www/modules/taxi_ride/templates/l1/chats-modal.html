<ion-modal-view cache-view="false" ng-controller="TaxiRideEstimateRideModalController" style="width: 100%; height:100%; margin-left:0% ;margin-top:0%;bottom:0%"  >
	<ion-header-bar class="bar-custom">
		<i class="icon ion-android-chat" style="font-size:30px;color:#6d84b4;bottom: 10px;position: fixed;"></i>
		<h1 class="title">{{data.role}} : {{data.alias}} </h1>
		<span class="closebtnMeter" ng-click="close()">&times;</i></span>
	</ion-header-bar>
       
	<ion-scroll  direction="y" style="width:100%;height:100%">   
        <div class="col-sm-3 col-sm-offset-4 frame">
			<div  id="texts" style="margin-bottom: 20px;overflow-y: auto;max-height:529px;"  >
				<ul style="bottom:15%"  >
					<li style="width:100%" ng-repeat="msg in data.chats track by $index" id="{{$index}}">
						<div ng-if="msg.origin=='driver'">
							<div class="msj macro" >
								<div class="avatar" ng-show="!isDriver"><!--<img class="img-circle" style="width:100%;" ng-src="{{driverImage}}" />--></div>
								<div class="text text-l">
									<p>{{msg.message}}</p>
									<p><small>{{msg.date}}</small></p>
								</div>
							</div>
						</div>
						<div ng-if="msg.origin=='passenger'"> 
							<div class="msj-rta macro" >
								<div class="text text-r">
									<p>{{msg.message}}</p>
									<p><small>{{msg.date}}</small></p>
								</div>
								<div class="avatar" ng-show="isDriver" style="padding:0px 0px 0px 10px !important"><!--<img class="img-circle" style="width:100%;" ng-src="{{passengerImage}}" />--></div>
							</div>
						</div>
					</li>
				</ul>
			</div>
			<br/>
			<div>
				<button ng-click="showInput()" class="button button-custom fab2 sidemenu" ng-if="data.shownbtn">
					<i class="ion-plus-circled"></i>
				</button>
                <div class="row1" style="margin:auto" ng-if="!data.shownbtn">
					<div class="text text-r" style="background:whitesmoke !important">
						<input class="mytext" placeholder="Type a message" ng-model="data.message"/>
                    </div> 
					<button class="button button-dark" ng-click="pushMsg()"> send </button>
                </div>
			</div>
        </div> 
    </ion-scroll>       
</ion-modal-view>
    
      <style>
           ion-modal-view {
    background-color: rgba(0,0,0,0.5) !important;
}
	
    .mytext{
        border:0;padding:10px;background:whitesmoke
    }
    .text{
        /* width: 100%; */
		display: flex;
		flex-direction: column;
    }
    .text > p:first-of-type{
        width:100%;margin-top:0;margin-bottom:auto;line-height: 13px;font-size: 12px;
    }
    .text > p:last-of-type{
        width:100%;text-align:right;color:silver;margin-bottom:-7px;margin-top:auto;
    }
    .text-l{
        float:left;padding-right:10px;
    }        
    .text-r{
        float:right;
		padding-left: 20px;
		margin-left: auto;
		margin-top: 5px;
    }
    .avatar{
        display:flex;
        justify-content:center;
        align-items:center;
        width:25%;
        float:left;
        padding-right:10px;
    }
    .macro{
        margin-top:5px;width:85%;border-radius:5px;padding:5px;display:flex;
    }
    .msj-rta{
        float:right;background:whitesmoke;
    }
    .msj{
        float:left;background:white;
    }
    .frame{
		height:100%;
        overflow-y:auto;
        padding:0;
        /*background:#e0e0de;*/
        margin-top: 10%;
    }
    .frame > div:last-of-type{
        position:absolute;width:100%;display:flex;
    }
    ul {
        width:100%;
        list-style-type: none;
        padding:18px;
     
       /* remove to make list scrollable
        bottom:4%;
        display:flex;
        flex-direction: column;
        margin-top: 20%;*/
    }
    .msj:before{
        width: 0;
        height: 0;
        content:"";
        top:-5px;
        left:-14px;
        position:relative;
        border-style: solid;
        border-width: 0 13px 13px 0;
        border-color: transparent #ffffff transparent transparent;            
    }
    .msj-rta:after{
        width: 0;
        height: 0;
        content:"";
        top:-5px;
        left:14px;
        position:relative;
        border-style: solid;
        border-width: 13px 13px 0 0;
        border-color: whitesmoke transparent transparent transparent;           
    }  
    input:focus{
        outline: none;
    }  
		
	.fab2 {
		border: none;
		font-size: 1.5em;
		border-radius: 50%;
		width: 50px;
		height: 50px;
		margin: auto;
		-webkit-box-shadow: 2px 3px 3px 0px rgba(41, 41, 41, .3);
		-moz-box-shadow: 2px 3px 3px 0px rgba(41, 41, 41, .3);
		box-shadow: 2px 3px 3px 0px rgba(41, 41, 41, .3);
		position: absolute;
		bottom: -20px; 
		right: 10px;
	}
	.row1 {
		display: -webkit-box;
		display: -webkit-flex;
		display: -moz-box;
		display: -moz-flex;
		display: -ms-flexbox;
		display: flex; 
		padding: 5px;
		width: 100%;
		bottom: -20px;
		position: absolute;
	}
      </style>
